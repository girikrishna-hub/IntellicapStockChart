# Stock Technical Analysis Application

## Overview
This project provides two Streamlit-based web applications for advanced stock analysis. It offers fundamental analysis with interactive charts, real-time tracking, and bulk analysis, incorporating various technical indicators (MACD, RSI, Chaikin Money Flow), Fibonacci retracement, financial metrics, and support/resistance levels. The application features an ultra-compact layout design optimized for single-screen viewing without scrolling, integrating Fibonacci levels directly into support/resistance metrics. It includes comprehensive PDF export functionality with complete 8-quarter earnings analysis, advanced analysis tab for detailed earnings performance, and institutional-grade financial metrics including advanced financial quality scoring models (Piotroski Score, Altman Z-Score, Beneish M-Score). The application now features a comprehensive A-D stock rating system evaluating four key categories: Value, Growth, Momentum, and Profitability with color-coded grades and detailed explanations. A static HTML landing page facilitates seamless navigation between the Yahoo Finance and GuruFocus versions, designed to avoid WebSocket conflicts. The comprehensive PDF export consolidates all analysis data into professional 1-2 page reports with complete earnings performance data, market intelligence, and technical analysis. Robust Yahoo Finance fallback systems ensure Market Intelligence functionality remains operational during premium API rate limits, providing authentic analyst ratings, price targets, and institutional data. The overarching vision is to provide comprehensive, user-friendly tools for in-depth stock market insights, catering to both fundamental and technical analysis needs.

## User Preferences
Preferred communication style: Simple, everyday language.

## System Architecture

### Frontend Architecture
The application uses Streamlit for rapid web development, leveraging its built-in widgets and Plotly for interactive charting. It employs a wide layout for optimal chart visibility. The setup involves three distinct applications: a static HTML landing page (port 3000) and two Streamlit applications for Yahoo Finance (port 5000) and GuruFocus (port 5001). The landing page utilizes JavaScript for navigation, avoiding WebSocket issues. UI elements are optimized with global CSS for reduced scrolling and offer a compact/standard view mode. PDF export functionality is included for comprehensive multi-page reports.

### Data Processing Layer
The Yahoo Finance version integrates with the `yfinance` library for free real-time and historical data. The GuruFocus version utilizes the GuruFocus REST API for institutional financial data, requiring authentication. Both versions extensively use Pandas DataFrames for data manipulation and NumPy for numerical computations, including moving averages. The `requests` library handles HTTP communications with proper error handling.

### Application Logic
The system supports both single stock analysis with interactive visualizations and bulk analysis with Excel export. It features a modular design with dedicated functions for data fetching, technical calculations, and metric extraction. Robust error handling is implemented for API interactions and bulk processing, along with data validation checks. Users can select time periods for data, and the application includes session-based storage for managing saved stock lists. An optional 10-minute auto-refresh system provides live market tracking. Key configurations include default parameters for various technical indicators and financial metrics, dynamic stock ticker processing, and professional Excel report generation. Stock symbols are automatically converted to uppercase and synchronized between fundamental and advanced analysis tabs. The Advanced Analysis tab supports both US and Indian markets with automatic detection, currency formatting, and `.NS` suffix handling for Indian stocks. News sentiment analysis also adapts to detect Indian stocks for market-specific news. Earnings data processing includes robust date validation, fallback logic for current year data, and warnings for potentially outdated information. Fibonacci analysis integrates directly into support/resistance columns, showing next Fibonacci levels when available as primary technical levels. A major UI restructuring introduces a dedicated "Earnings & Dividends" tab for improved content organization. Ultra-compact view mode (Aug 2025) achieves single-screen display with dramatically reduced whitespace, 6-column grid layouts, integrated Fibonacci support/resistance, condensed earnings data (3 columns), streamlined extended hours (3 columns), and CSS transform scaling for optimal space utilization while maintaining full readability. Technical charts include comprehensive MACD, RSI, and Chaikin Money Flow indicators with export functionality. Recent UI optimization (Aug 19, 2025) restructured the main navigation layout to position Time Period selection alongside Analysis Mode radio buttons in the top row, creating better visual alignment and more efficient use of screen real estate. Button layout was optimized with Generate Chart and Export PDF buttons stacked vertically using full container width to prevent text wrapping and improve readability. Advanced financial quality scoring (Aug 20, 2025) integrates three institutional-grade metrics into the Advanced Analysis tab: Piotroski Score (1-9 financial health assessment), Altman Z-Score (bankruptcy prediction with zone classification), and Beneish M-Score (earnings manipulation detection), each with color-coded displays, detailed explanations, and comprehensive interpretation guides. Critical data accuracy fix (Aug 20, 2025) resolved inconsistent Fibonacci calculations between PDF export and main UI - both now use identical yfinance 3-month queries ensuring complete data synchronization across all views. Comprehensive A-D stock rating system (Aug 21, 2025) implemented with four key evaluation categories: Value (P/E, P/B, P/S ratios), Growth (revenue and earnings growth), Momentum (1-month, 3-month, 6-month price performance), and Profitability (ROE, ROA, profit margins). Each rating displays color-coded grades (A=ðŸŸ¢ Excellent, B=ðŸŸ¡ Good, C=ðŸŸ  Fair, D=ðŸ”´ Poor) with detailed tooltips and comprehensive rating guide explanations, positioned strategically in the Advanced Analysis tab between Growth Analysis and Financial Quality Scores sections. Complete PDF export implementation (Aug 21, 2025) with comprehensive 8-quarter earnings analysis featuring all 13 columns from Advanced Analysis tab: Quarter, Date, Pre-Close, Next Open, Next Close, Overnight%, NextDay%, Week Close, Week%, Direction, EPS Est, EPS Act, and Surprise. PDF uses landscape table orientation with optimized column widths and 3-year historical data fetch to ensure complete quarter coverage. The comprehensive PDF consolidates A-D ratings, technical analysis, financial quality scores, complete earnings performance, market intelligence, and technical charts into professional 1-2 page reports.

## External Dependencies

### Financial Data Services
- **Yahoo Finance API**: Used via the `yfinance` Python library for historical and real-time stock market data.
- **GuruFocus API**: A professional service integrated for institutional-grade financial data.

### Visualization and Analytics
- **Plotly**: Utilized for creating interactive financial charts.
- **Pandas**: Essential for data manipulation and analysis.
- **NumPy**: Employed for numerical operations and computations.

### Web Framework
- **Streamlit**: The primary framework for building the web applications.
- **Python Standard Library**: Specifically the `datetime` module for handling time-based operations.

### Runtime Environment
- **Python 3.x**: The core programming language.
- **Web Browser**: Required for client-side rendering of the Streamlit applications.